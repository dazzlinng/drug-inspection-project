# -*- coding: utf-8 -*-\nimport ijson\nimport json\nimport os\n\n# 创建输出目录\noutput_dir = "药品性状"\nos.makedirs(output_dir, exist_ok=True)\n\n# 用于计数已处理的药品数量\nextracted_count = 0\nmax_count = 20\n\ntry:\n    with open('full_drug_standards.json', 'rb') as f:\n        # 使用ijson流式解析JSON数组\n        parser = ijson.items(f, 'item')\n        \n        # 处理每条记录\n        for drug in parser:\n            if extracted_count >= max_count:\n                break\n                \n            # 获取药品名称和性状\n            name = drug.get("名称", "未知药品")\n            property_desc = drug.get("性状", "未找到")\n            \n            # 创建单个药品的JSON数据\n            drug_property = {\n                "名称": name,\n                "性状": property_desc\n            }\n            \n            # 生成安全的文件名（移除可能引起问题的字符）\n            safe_name = "".join(c for c in name if c.isalnum() or c in (' ', '_', '-')).rstrip()\n            # 如果文件名为空，则使用索引\n            if not safe_name:\n                safe_name = f"drug_{extracted_count}"\n                \n            # 写入单独的JSON文件\n            output_file = os.path.join(output_dir, f"{safe_name}.json")\n            with open(output_file, 'w', encoding='utf-8') as out_f:\n                json.dump(drug_property, out_f, ensure_ascii=False, indent=2)\n            \n            print(f"已处理: {name}")\n            extracted_count += 1\n        \n        print(f"成功抽取{extracted_count}个药品的性状信息并保存到'{output_dir}'目录下")\n        \nexcept Exception as e:\n    print(f"处理过程中出现错误: {e}")
